@page "/"
@layout PublicLayout
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthStateProvider

<PageTitle>Chronicis ‚Äî Campaign Notes for Tabletop RPGs</PageTitle>

<div class="landing">
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-text">
            <h1 class="hero-title">
                Never Lose Track of Your Campaign Again
            </h1>
            <p class="hero-subtitle">
                Chronicis is the knowledge base built for tabletop RPGs.
                Organize your world, link your lore, and let AI help you
                remember what happened three sessions ago.
            </p>
            <div class="hero-badge">
                <span class="badge-icon">‚ú®</span>
                <span>Free during early access</span>
            </div>
        </div>
        <div class="hero-visual">
            <div class="browser-frame">
                <div class="browser-header">
                    <div class="browser-dots">
                        <span></span><span></span><span></span>
                    </div>
                    <div class="browser-url">chronicis.app/w/forgotten-realms</div>
                </div>
                <div class="browser-content">
                    <img src="/images/ScreenshotDemo.png"
                         alt="Chronicis interface showing campaign notes"
                         onerror="this.parentElement.innerHTML='<div class=\'placeholder-screenshot\'><span>üìö</span><p>Your campaign knowledge, beautifully organized</p></div>'" />
                </div>
            </div>
        </div>
    </section>

    <!-- Social Proof -->
    <section class="social-proof">
        <p>Built for the games you love</p>
        <div class="game-icons">
            <span title="Dungeons &amp; Dragons">üêâ</span>
            <span title="Pathfinder">‚öîÔ∏è</span>
            <span title="Call of Cthulhu">üêô</span>
            <span title="Vampire: The Masquerade">ü¶á</span>
            <span title="And many more...">‚ú®</span>
        </div>
    </section>

    <!-- Problem Statement -->
    <section class="problem-section">
        <div class="section-container">
            <h2 class="section-eyebrow">The Problem</h2>
            <h3 class="section-title">Campaign Notes Are a Mess</h3>
            <p class="section-subtitle">
                You've got session notes in Google Docs, NPC names in Discord,
                maps on your desktop, and that important plot detail... somewhere.
                When a player asks "Who was that merchant in Baldur's Gate?",
                you're digging through chaos.
            </p>
        </div>
    </section>

    <!-- Solution / Features -->
    <section class="features-section">
        <div class="section-container">
            <h2 class="section-eyebrow">The Solution</h2>
            <h3 class="section-title">One Place for Everything</h3>

            <div class="features-grid">
                <div class="feature-card feature-highlight">
                    <div class="feature-icon">üå≥</div>
                    <h4>Hierarchical Organization</h4>
                    <p>
                        Build your world like a wiki. Nest locations inside regions,
                        NPCs inside factions, spells inside schools. Drag and drop to reorganize anytime.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üîó</div>
                    <h4>Wiki-Style Linking</h4>
                    <p>
                        Type <code class="landing-code">[[Vajra Safahr]]</code> and it becomes a live link.
                        Click to jump there, hover for a preview. Autocomplete finds articles as you type.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">‚Ü©Ô∏è</div>
                    <h4>Automatic Backlinks</h4>
                    <p>
                        See every place an NPC, location, or concept is mentioned.
                        Discover connections across your campaign you didn't know existed.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <h4>AI-Powered Summaries</h4>
                    <p>
                        Click a button and AI reads every mention of a character across
                        your entire campaign, then writes a comprehensive summary. Perfect for session prep.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üìú</div>
                    <h4>Multi-Author Sessions</h4>
                    <p>
                        Every player captures their own perspective on each session.
                        The GM gets an AI-generated summary combining every viewpoint into one cohesive recap.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üîí</div>
                    <h4>GM Private Notes</h4>
                    <p>
                        A dedicated private planning area on every World, Campaign, Arc, and Session page ‚Äî
                        visible only to the GM. Keep plot twists and prep hidden until you're ready.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üìö</div>
                    <h4>D&amp;D Reference Library</h4>
                    <p>
                        Search and embed official D&amp;D SRD content directly into your articles.
                        Type <code class="landing-code">[[srd/fire</code> to find fire spells instantly.
                        Supports Open5e, SRD 2014, and SRD 2024.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h4>Quest Log</h4>
                    <p>
                        Track active, completed, and failed quests. Players add their own notes
                        per quest. Press <code class="landing-code">Ctrl+Q</code> during a session note to pull it up instantly.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h4>Instant Search</h4>
                    <p>
                        Find anything in seconds. Search titles, content, or wiki links.
                        See exactly where your search term appears with inline context snippets.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üìÑ</div>
                    <h4>Document Library</h4>
                    <p>
                        Upload maps, handouts, character sheets, and homebrew content ‚Äî up to 200MB.
                        PDFs and images attach directly to your world, accessible to all members.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üíæ</div>
                    <h4>Auto-Save Everything</h4>
                    <p>
                        Just type. Your work saves automatically as you go.
                        No save button, no lost work, no anxiety.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üåê</div>
                    <h4>Public World Sharing</h4>
                    <p>
                        Share your world publicly via a custom URL ‚Äî no login required for readers.
                        Control exactly which articles are visible with per-article privacy settings.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section class="how-section">
        <div class="section-container">
            <h2 class="section-eyebrow">How It Works</h2>
            <h3 class="section-title">From Chaos to Chronicle in Minutes</h3>

            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h4>Create Your World</h4>
                    <p>
                        Start with a World ‚Äî your campaign setting. Add a Campaign, break it into
                        Arcs, and log your Sessions as you play.
                    </p>
                </div>
                <div class="step-connector"></div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h4>Build Your Wiki</h4>
                    <p>
                        Document characters, locations, factions, and lore as nested articles.
                        Link them with <code class="landing-code">[[wiki links]]</code> and watch the knowledge graph grow.
                    </p>
                </div>
                <div class="step-connector"></div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h4>Play and Collaborate</h4>
                    <p>
                        Invite your players with a share code. Every session, each person
                        adds their notes. AI summarizes everything so nothing gets lost.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- New User Experience callout -->
    <section class="onboarding-callout-section">
        <div class="section-container">
            <div class="onboarding-callout">
                <div class="onboarding-callout-icon">üß≠</div>
                <div class="onboarding-callout-body">
                    <h3>You Won't Start from Scratch</h3>
                    <p>
                        When you sign up, Chronicis gives you a fully populated example world to explore ‚Äî
                        complete with articles, characters, sessions, and linked lore. See how everything fits together
                        before you build your own. A contextual help sidebar follows you through the app,
                        showing tips specific to wherever you are.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonial / Quote -->
    <section class="quote-section">
        <div class="section-container">
            <blockquote>
                <p>"Finally, a tool that thinks like a DM."</p>
                <cite>‚Äî What we hope you'll say after trying Chronicis</cite>
            </blockquote>
        </div>
    </section>

    <!-- Final CTA -->
    <section class="final-cta">
        <div class="section-container">
            <h2>Ready to Organize Your Campaign?</h2>
            <p>
                Join the early access and help shape the future of campaign management.
                It's free, it's fast, and your notes will thank you.
            </p>

            <AuthorizeView>
                <Authorized>
                    <MudButton Variant="Variant.Filled"
                               Color="Color.Primary"
                               Size="Size.Large"
                               Href="/dashboard"
                               Class="cta-primary cta-large">
                        Open Your Dashboard &nbsp;&nbsp;‚û§
                    </MudButton>
                </Authorized>
                <NotAuthorized>
                    <MudButton Variant="Variant.Filled"
                               Color="Color.Primary"
                               Size="Size.Large"
                               Href="authentication/login"
                               EndIcon="@Icons.Material.Filled.ArrowForward"
                               Class="cta-primary cta-large">
                        Create Your Free Account
                    </MudButton>
                    <p class="cta-subtext">Sign in with Google or Discord</p>
                </NotAuthorized>
            </AuthorizeView>
        </div>
    </section>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthStateProvider.GetAuthenticationStateAsync();
        if (authState.User.Identity?.IsAuthenticated == true)
        {
            Navigation.NavigateTo("/dashboard");
        }
    }
}
